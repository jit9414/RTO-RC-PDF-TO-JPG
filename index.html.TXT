<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PDF to JPG Converter</title>

<style>
  body {
    margin: 0;
    font-family: "Segoe UI", Arial, sans-serif;
    background: linear-gradient(120deg, #f6f9fc, #e9eff5);
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .container {
    background: #fff;
    width: 420px;
    padding: 25px;
    border-radius: 14px;
    box-shadow: 0 20px 40px rgba(0,0,0,0.1);
    text-align: center;
  }

  h2 {
    margin-top: 0;
    color: #333;
  }

  p {
    color: #666;
    font-size: 14px;
  }

  input[type="file"] {
    margin: 15px 0;
  }

  button {
    width: 100%;
    padding: 12px;
    background: #e63946;
    border: none;
    color: white;
    font-size: 16px;
    border-radius: 8px;
    cursor: pointer;
    transition: 0.3s;
  }

  button:hover {
    background: #d62839;
  }

  #status {
    margin-top: 15px;
    font-weight: bold;
    color: #2a9d8f;
  }

  .footer {
    margin-top: 20px;
    font-size: 12px;
    color: #888;
  }
</style>
</head>

<body>

<div class="container">
  <h2>PDF to JPG Converter</h2>
  <p>High Quality â€¢ ZIP Download â€¢ Offline Tool</p>

  <input type="file" id="pdfFiles" multiple accept="application/pdf">

  <button onclick="startConversion()">Convert & Download ZIP</button>

  <div id="status"></div>

  <div class="footer">
    Developed by <strong>Jitendra Badiyasar</strong>
  </div>
</div>

<!-- Libraries -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>

<script>
pdfjsLib.GlobalWorkerOptions.workerSrc =
"https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.16.105/pdf.worker.min.js";

async function startConversion() {
  const files = document.getElementById("pdfFiles").files;
  if (files.length === 0) {
    alert("Please select PDF files");
    return;
  }

  document.getElementById("status").innerText = "Converting... Please wait â³";

  for (let file of files) {
    await convertPDF(file);
  }

  document.getElementById("status").innerText = "Conversion Completed âœ…";
}

async function convertPDF(file) {
  const zip = new JSZip();
  const reader = new FileReader();

  return new Promise((resolve) => {
    reader.onload = async function () {
      const pdfData = new Uint8Array(this.result);
      const pdf = await pdfjsLib.getDocument(pdfData).promise;

      for (let i = 1; i <= pdf.numPages; i++) {
        const page = await pdf.getPage(i);

        // ðŸ”¥ MAX QUALITY (PRINT GRADE)
        const viewport = page.getViewport({ scale: 4 });

        const canvas = document.createElement("canvas");
        const ctx = canvas.getContext("2d");

        canvas.width = viewport.width;
        canvas.height = viewport.height;

        await page.render({
          canvasContext: ctx,
          viewport: viewport
        }).promise;

        // JPEG quality 1.0 = best possible
        const imgData = canvas.toDataURL("image/jpeg", 1.0);
        const base64 = imgData.split(",")[1];

        zip.file(`page_${i}.jpg`, base64, { base64: true });
      }

      zip.generateAsync({ type: "blob" }).then(function (content) {
        const zipName = file.name.replace(".pdf", "") + ".zip";
        saveAs(content, zipName);
        resolve();
      });
    };

    reader.readAsArrayBuffer(file);
  });
}
</script>

</body>
</html>
